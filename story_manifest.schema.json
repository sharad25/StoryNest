{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "title": "StoryManifest",
  "type": "object",
  "required": ["id","title","pages","sequence"],
  "properties": {
    "id": {"type":"string"},
    "title": {"type":"string"},
    "author": {"type":"string"},
    "language": {"type":"string"},
    "pages": {
      "type":"array",
      "items": {
        "type":"object",
        "required":["index","text"],
        "properties":{
          "index":{"type":"integer","minimum":0},
          "text":{"type":"string"},
          "image":{"type":"string"},
          "audio":{"type":"string"},
          "duration_ms":{"type":"integer","minimum":0},
          "word_timings": {
            "type":"array",
            "items":{
              "type":"object",
              "required":["word","start_ms","end_ms"],
              "properties":{
                "word":{"type":"string"},
                "start_ms":{"type":"integer","minimum":0},
                "end_ms":{"type":"integer","minimum":0}
              }
            }
          }
        },
        "additionalProperties": false
      }
    },
    "sequence": {
      "type":"array",
      "items":{
        "type":"object",
        "required":["type"],
        "properties":{
          "type":{"type":"string","enum":["page","question_block","quiz","interactive"]},
          "page_index":{"type":"integer","minimum":0}
        }
      }
    },
    "questions": {
      "type":"array",
      "items":{
        "type":"object",
        "required":["id","type","prompt"],
        "properties":{
          "id":{"type":"string"},
          "position_after_page":{"type":"integer","minimum":0},
          "type":{"type":"string","enum":["multiple_choice","fill_blank","subjective"]},
          "prompt":{"type":"string"},
          "choices":{
            "type":"array",
            "items":{
              "type":"object",
              "required":["id","text"],
              "properties":{"id":{"type":"string"},"text":{"type":"string"}}
            }
          },
          "correct_choice_id":{"type":"string"},
          "answer_template":{"type":"string"},
          "feedback":{"type":"object"}
        },
        "additionalProperties": false
      }
    },
    "metadata": {
      "type":"object",
      "properties": {
        "reading_level":{"type":"string"},
        "duration_ms":{"type":"integer","minimum":0}
      }
    }
  },
  "additionalProperties": false
}